## Описание

Этот репозиторий реализует пайплайн **Retrieval-Augmented Generation (RAG)** для обработки запросов и генерации ответов на основе извлечённых данных. Пайплайн реализует поиск релевантных документов и генерацию текста с использованием MistralAI. 

В качестве данных используется документация продукта Kaspersky Endpoint Detection and Response (KEDR). KEDR — эффективное решение для защиты конечных точек и укрепления системы ИТ-безопасности. Система обеспечивает полный обзор рабочих мест и позволяет эффективно реагировать на инциденты. С помощью продукта можно автоматизировать все процессы выявления, приоритизации, расследования и нейтрализации различных угроз. Kaspersky EDR предполагает управление как с единой облачной платформы, так и из локально установленной консоли.

---

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/AlexToW/RAGpipeline.git
   cd RAGpipeline
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Убедитесь, что у вас есть доступ к моделям MistralAI, и настройте необходимые API-ключи:
    ```bash
   export MISTRAL_API_KEY="<your Mistral api key>"
   ```

---

## Использование
В качетсве примера можно использовать код из run_RAG.py:
```python
from rag.pipeline import RAGPipeline
from config import RAGConfig

rag_config = RAGConfig()
rag_pipeline = RAGPipeline(rag_config)

questions = "Сколько серверов минимально необходимо при кластерной установке?"

answer = rag_pipeline.get_response(question)
print(answer)
```

--

## Примеры
Примеры ответов на вопросы по документации с использованием RAG и без (только LLM):

| Вопрос            | LLM only          | RAG               |
|-------------------|-------------------|-------------------|
| Что такое KATA?   | KATA — это термин, который может иметь разные значения в зависимости от контекста. Вот несколько наиболее распространенных     | KATA (Kaspersky Anti Targeted Attack) — это платформа для эффективного обнаружения следов атак и их обезвреживания. Она помогает снизить возможный ущерб для компании и снизить риски, а также повысить эффективность работы департаментов и инженеров.     |
| Можно ли добавить в исключение IDS и TAA правила?    | Добавление исключений в системы обнаружения вторжений (IDS) и системы антивирусной защиты (TAA) может быть необходимо для предотвращения ложных срабатываний и обеспечения корректной работы легитимных приложений и процессов. Однако, это должно делаться с осторожностью, чтобы не создать уязвимости в системе безопасности.     | Да, можно добавить в исключение правила как для IDS, так и для TAA. Для IDS исключения создаются через карточку обнаружения ссылкой "Add to exclusions". Для TAA исключения создаются аналогично, с возможностью добавления дополнительных условий.    |
| Сколько серверов минимально необходимо при кластерной установке?    | Количество серверов, минимально необходимое для кластерной установки, зависит от конкретной архитектуры и требований системы. Однако, для большинства кластерных систем минимальное количество серверов составляет три.     | Для кластерной установки минимально необходимо 4 сервера: 2 сервера хранения и 2 обрабатывающих сервера.     |
| В каком формате нужно добавлять пользовательские ioc? | Пользовательские индикаторы компрометации (IOC) могут быть добавлены в различных форматах в зависимости от используемой платформы или системы безопасности. | Пользовательские IOC (индикаторы компрометации) нужно добавлять в формате OpenIOC. Их можно только импортировать из файла в этом формате. Редактировать условия поиска индикаторов компрометации в загруженных правилах нельзя, их нужно редактировать перед импортом. |
| Какие технологии детектирования поддерживает kedr?| KEDR (Kernel EDge Regression) — это инструмент для профилирования производительности, который использует методы статистического анализа для выявления узких мест в производительности программного обеспечения. Он поддерживает различные технологии детектирования для сбора данных о производительности. | KEDR поддерживает несколько технологий детектирования, включая TAA, SB, IOC, YARA и AM. Технологии TAA, SB и AM применяются на серверах KATA, а IOC и YARA используют пользовательские правила.| 


## Структура репозитория

- **`retriever.py`**: Модуль для извлечения релевантных документов на основе запроса.
- **`generator.py`**: Модуль для генерации ответа с использованием модели MistralAI.
- **`pipeline.py`**: Интеграция модулей `Retriever` и `Generator` в единый пайплайн.
